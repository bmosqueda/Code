<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Búsqueda binaria</title>

</head>
<body>
	<h1>Número buscado</h1>
	<input type="number" name="numSearched" placeholder="numero" id="numSearched">
	<button onclick="buscar()">buscar</button>
	<br><br>
	<label for="numInsert">Número a insertar</label>
	<input type="number" name="numInsert" placeholder="Valor a insertar" id="numInsert">
	<label for="numPosition">Posición a insertar</label>
	<input type="number" name="numPosition" placeholder="Posición a insertar" id="numPosition">
	<br>
	<button onclick="insert()">Insertar</button>
	<br><br>
	<button onclick="imprimir()">Imprimir vector</button>
	<br>
	<br>
	<p id="resultPosition"></p>
	<br>
	<p id="result"></p>

	<script type="text/javascript">
		const numSearched = document.getElementById("numSearched");
		const numInsert = document.getElementById('numInsert');
		const numPosition = document.getElementById('numPosition');
		const result = document.getElementById("result");
		const resultPosition = document.getElementById("resultPosition");

		const length = 1000;
		const vector = new Array(length);
		for (var i = length - 1; i >= 0; i--) {
			vector[i] =  i * 2;
		}

		function imprimir() {
			result.innerHTML = "";
			for (var i = 0; i < vector.length; i++) {
				result.innerHTML += vector[i] + " ";
			}
		}

		var searchNumber = function(array, id) {
			var min = 0;
			var max = array.length - 1;
			var mean;
			console.log("id: " + id);
			while (max >= min) {
				mean = Math.floor((max+min)/2);
				console.log("Min: " + min + " Max: " + max);
				console.log("Promedio: " + mean);
				console.log("Array mean: " + array[mean]);

				if(array[mean]==id) 
				{
					return mean;
				}
				else if (array[mean] < id) {
					console.log("mayor");
					min = mean + 1;
				}
				else {
					console.log("menor");
					max = mean - 1;
				}
				console.log("\n");
			}
			return -1;
		};

		//The numbers are unique, they cannot have two same numbers, if the number already exists it will return -1
		var getInsertPosition = function(array, id)
		{
			var min = 0;
			var max = array.length - 1;
			var mean;
			var position;
			console.log("id: " + id);

            while(max >= min)
            {
				mean = Math.floor((max+min)/2);
				console.log("Min: " + min + " Max: " + max);
				console.log("Promedio: " + mean);
				console.log("Array mean: " + array[mean]);
				if(array[mean] == id)
					return -1;	//This number already exists

                id > array[mean] ? (min = mean + 1) : (max = mean - 1);
                position = mean;
				console.log("\n");                        
            }

            position = array[position] > id ? position : position + 1;
            return position;
		}


		function buscar() {
			num = numSearched.value;
			result.innerHTML = searchNumber(vector, num);
		}

		function insert() {
			var position = getInsertPosition(vector, numInsert.value);
			if(position != -1)
			{
				var insertNum = numInsert.value;
				for(var i = position; i < length; i++)
				{
					var temp = vector[i];
					vector[i] = insertNum;
					insertNum = temp;
				}
				resultPosition.innerHTML = "POSITION: " + position;
				imprimir();
			}
			else
				alert("El número " + numInsert.value + " ya está en el vector");

		}
	</script>
</body>
</html>